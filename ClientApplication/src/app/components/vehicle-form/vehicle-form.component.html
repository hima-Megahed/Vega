<h1>New Vehicle</h1>

<div class="row">
  <div class="col-sm-6">
    <form #form="ngForm" (ngSubmit)="submit()">
      <div class="form-group">
        <label for="manufacturer">Manufacturer</label>
        <select #Manufacturer="ngModel" class="form-control" id="manufacturer" name="manufacturerId" (change)="onManufacturerChange()" [(ngModel)]="vehicle.manufacturerId" required>
          <option value=""></option>
          <option *ngFor="let manufacturer of manufacturers" value="{{ manufacturer.id }}">
            {{ manufacturer.name }}
          </option>
        </select>
        <div class="alert alert-danger" *ngIf="Manufacturer.touched && !Manufacturer.valid">Please specify the manufacturer.</div>
      </div>
      <div class="form-group">
        <label for="model">Model</label>
        <select class="form-control" id="model" [(ngModel)]="vehicle.modelId" name="modelId">
          <option value=""></option>
          <option *ngFor="let model of models" value="{{ model.id }}"> {{ model.name }} </option>
        </select>
      </div>

      <p>Is this vehicle registered?</p>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="isRegistered" id="registered" [value]="true" [(ngModel)]="vehicle.isRegistered">
        <label class="form-check-label" for="registered">Yes</label>
      </div>
      <div class="form-check form-check-inline">
        <input class="form-check-input" type="radio" name="isRegistered" id="notRegistered" [value]="false" [(ngModel)]="vehicle.isRegistered">
        <label class="form-check-label" for="notRegistered">No</label>
      </div>

      <h2>Features</h2>
      <div *ngFor="let f of features" class="form-check">
        <input class="form-check-input" type="checkbox" value="{{ f.id }}" id="feature{{ f.id }}" (change)="onFeatureToggle(f.id, $event)" [checked]="vehicle.features.includes(f.id)">
        <label class="form-check-label" for="feature{{ f.id }}">
          {{ f.name }}
        </label>
      </div>

      <h2>Contact</h2>
      <div class="form-group">
        <label for="name">Name</label>
        <input #ContactName="ngModel" type="text" class="form-control" id="name" placeholder="Enter your name" name="contactName" [(ngModel)]="vehicle.contact.name" required>
        <div class="alert alert-danger" *ngIf="ContactName.touched && !ContactName.valid">Please specify the Contact name.</div>
      </div>

      <div class="form-group">
        <label for="phone">Phone</label>
        <input #ContactPhone="ngModel"  type="text" class="form-control" id="phone" placeholder="Enter your phone" name="contactPhone" [(ngModel)]="vehicle.contact.phone" required>
        <div class="alert alert-danger" *ngIf="ContactPhone.touched && !ContactPhone.valid">Please specify the Contact phone.</div>
      </div>

      <div class="form-group">
        <label for="email">Email</label>
        <input type="email" class="form-control" id="email" placeholder="Enter your email" name="contactEmail" [(ngModel)]="vehicle.contact.email">
      </div>

      <button type="submit" class="btn btn-primary" [disabled]="!form.valid">Save</button>
    </form>
  </div>

  <div class="col-sm-6"></div>
</div>

